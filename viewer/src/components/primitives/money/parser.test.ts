import { parseExpression } from "./parser";

describe("Money Value Parser", () => {
  test.each([
    ["10", 10],
    ["0", 0],
    ["0010", 10],
    ["$10", 10],
    ["0.3", 0.3],
    ["0.35", 0.35],
    ["$0.3", 0.3],
    ["-10", -10],
    ["1+1", 2],
    ["1-1", 0],
    ["10*10", 100],
    ["10/5", 2],
    ["1-1+1-1+3-5", -2],
    ["2*8+4", 20],
    ["2*(8+4)", 24],
    ["-(2+2)", -4],
    ["-4/(2*2+1)", -0.8],
    ["(7-5)*(-4/(2*2+1))+10", 8.4],
    ["23.45 - $18.6", 4.85],
    ["(23.45 - $18.6) * 1.0825", 5.25015],
    ["tax(23.45 - $18.6)", 5.25015],
  ])("given %p, returns %p", (input: string, output: number) => {
    const result = parseExpression(input);
    expect(result).toBeCloseTo(output, 4);
  });
});
